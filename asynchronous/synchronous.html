<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Function start</title>
    <style></style>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
  </head>

  <body>
    <label for="quota">Number of primes:</label>
    <input type="text" id="quota" name="quota" value="1000000" />

    <button id="generate">Generate primes</button>
    <!-- <button id="reload">Reload</button> -->

    <div id="output"></div>

    <button id="xhr">Click to start request</button>
    <button id="reload">Reload</button>

    <pre readonly class="event-log"></pre>

    <script>
      async function fetchProducts() {
        try {
          const response = await fetch(
            "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json"
          );
          if (!response.ok) {
            throw new Error(`HTTP error: ${response.status}`);
          }
          const json = await response.json();
          return json;
        } catch (error) {
          console.error(`Could not get products: ${error}`);
        }
      }

      const jsonPromise = fetchProducts();
      jsonPromise.then((json) => console.log(json[0].name));

      //   async function main() {
      //     const jsonPromise = await fetchProducts();
      //     console.log(jsonPromise[0].name);
      //   }

      //   main();

      // const jsonPromise = await fetchProducts();
      // console.log(jsonPromise[0].name);

      //   jsonPromise.then((json) => console.log(json[0].name));

      //   async function fetchProducts() {
      //     try {
      //       // after this line, our function will wait for the `fetch()` call to be settled
      //       // the `fetch()` call will either return a Response or throw an error
      //       const response = await fetch(
      //         "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products1.json"
      //       );
      //       if (!response.ok) {
      //         throw new Error(`HTTP error: ${response.status}`);
      //       }
      //       // after this line, our function will wait for the `response.json()` call to be settled
      //       // the `response.json()` call will either return the JSON object or throw an error
      //       const json = await response.json();
      //       console.log(json[1].name);
      //     } catch (error) {
      //       console.error(`Could not get products: ${error.message}`);
      //     }
      //   }

      //   fetchProducts();

      //   const fetchPromise1 = fetch(
      //     "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json"
      //   );
      //   const fetchPromise2 = fetch(
      //     "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/not-found"
      //   );
      //   const fetchPromise3 = fetch(
      //     "https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json"
      //   );

      //   Promise.any([fetchPromise1, fetchPromise2, fetchPromise3])
      //     .then((response) => {
      //       console.log(`${response.url}: ${response.status}`);
      //     })
      //     .catch((error) => {
      //       console.error(`Failed to fetch: ${error}`);
      //     });

      //   const fetchPromise1 = fetch(
      //     "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json"
      //   );
      //   const fetchPromise2 = fetch(
      //     "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/not-found"
      //   );
      //   const fetchPromise3 = fetch(
      //     "bad-scheme://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json"
      //   );

      //   Promise.all([fetchPromise1, fetchPromise2, fetchPromise3])
      //     .then((responses) => {
      //       for (const response of responses) {
      //         console.log(`${response.url}: ${response.status}`);
      //       }
      //     })
      //     .catch((error) => {
      //       console.error(`Failed to fetch: ${error}`);
      //     });

      //   const fetchPromise1 = fetch(
      //     "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json"
      //   );
      //   const fetchPromise2 = fetch(
      //     "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/not-found"
      //   );
      //   const fetchPromise3 = fetch(
      //     "https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json"
      //   );

      //   Promise.all([fetchPromise1, fetchPromise2, fetchPromise3])
      //     .then((responses) => {
      //       for (const response of responses) {
      //         console.log(`${response.url}: ${response.status}`);
      //       }
      //     })
      //     .catch((error) => {
      //       console.error(`Failed to fetch: ${error}`);
      //     });

      //   const fetchPromise = fetch(
      //     "bad-scheme://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json"
      //   );

      //   fetchPromise
      //     .then((response) => {
      //       if (!response.ok) {
      //         throw new Error(`HTTP error: ${response.status}`);
      //       }
      //       return response.json();
      //     })
      //     .then((json) => {
      //       console.log(json[0].name);
      //     })
      //     .catch((error) => console.error(`Could not get products: ${error}`));

      //   const fetchPromise = fetch(
      //     "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json"
      //   );

      //   fetchPromise
      //     .then((response) => {
      //       if (!response.ok) {
      //         throw new Error(`HTTP error: ${response.status}`);
      //       }
      //       return response.json();
      //     })
      //     .then((json) => {
      //       console.log(json[0].name);
      //     });

      //   fetchPromise
      //     .then((response) => {
      //       return response.json();
      //     })
      //     .then((json) => {
      //       console.log(json[0].name);
      //     });

      //   fetchPromise.then((response) => {
      //     const jsonPromise = response.json();
      //     // console.log(jsonPromise);
      //     jsonPromise.then((json) => {
      //       console.log(json);
      //       console.log(json[0].name);
      //     });
      //     console.log("test");
      //   });

      //   const fetchPromise = fetch(
      //     "https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json"
      //   );

      //   console.log(fetchPromise);

      //   fetchPromise.then((response) => {
      //     console.log(`Received response: ${response.status}`);
      //     console.log(response);
      //   });

      //   console.log("Started request...");

      //   function fetchUser() {
      //     var url = "https://jsonplaceholder.typicode.com/users/1";
      //     return fetch(url).then(function (response) {
      //       let result = response.json();
      //       console.log(result);
      //       return result;
      //     });
      //   }

      //   function fetchTodo() {
      //     var url = "https://jsonplaceholder.typicode.com/todos/1";
      //     return fetch(url).then(function (response) {
      //       //   console.log(response.json());
      //       return response.json();
      //     });
      //   }

      //   async function logTodoTitle() {
      //     try {
      //       var user = await fetchUser();
      //       if (user.id === 1) {
      //         var todo = await fetchTodo();
      //         console.log(todo.title); // delectus aut autem
      //       }
      //     } catch (error) {
      //       console.log(error);
      //     }
      //   }

      //   logTodoTitle();

      //   function fetchItems() {
      //     return new Promise(function (resolve, reject) {
      //       var items = [1, 2, 3];
      //       resolve(items);
      //     });
      //   }

      //   async function logItems() {
      //     var resultItems = await fetchItems();
      //     console.log(resultItems[0]); // [1,2,3]
      //   }

      //   logItems();

      //   // catch()로 오류를 감지하는 코드
      //   function getData() {
      //     return new Promise(function (resolve, reject) {
      //       resolve("hi");
      //     });
      //   }

      //   getData()
      //     .then(function (result) {
      //       console.log(result); // hi
      //       throw new Error("Error in then()");
      //     })
      //     .catch(function (err) {
      //       console.log("then error11 : ", err.message); // then error :  Error: Error in then()
      //     });

      //   console.log("Hello");
      //   // #2
      //   setTimeout(function () {
      //     console.log("Bye");
      //   }, 3000);
      //   // #3
      //   console.log("Hello Again");

      //   function doStep1(init, callback) {
      //     const result = init + 1;
      //     callback(result);
      //   }

      //   function doStep2(init, callback) {
      //     const result = init + 2;
      //     callback(result);
      //   }

      //   function doStep3(init, callback) {
      //     const result = init + 3;
      //     callback(result);
      //   }

      //   function doOperation() {
      //     doStep1(0, (result1) => {
      //       doStep2(result1, (result2) => {
      //         doStep3(result2, (result3) => {
      //           console.log(`result: ${result3}`);
      //         });
      //       });
      //     });
      //   }

      //   doOperation();

      //   const log = document.querySelector(".event-log");

      //   document.querySelector("#xhr").addEventListener("click", () => {
      //     log.textContent = "";

      //     const xhr = new XMLHttpRequest();

      //     xhr.addEventListener("loadend", () => {
      //       //   log.textContent = `${log.textContent}Finished with status: ${xhr.status}`;
      //       alert(log.textContent);
      //       console.log(log.textContent);
      //       log.textContent = "Finished with status: " + xhr.status;
      //     });

      //     xhr.open(
      //       "GET",
      //       "https://raw.githubusercontent.com/mdn/content/main/files/en-us/_wikihistory.json"
      //     );
      //     xhr.send();
      //     log.textContent = `${log.textContent}Started XHR request\n`;
      //     alert(log.textContent);
      //   });

      //   document.querySelector("#reload").addEventListener("click", () => {
      //     log.textContent = "";
      //     document.location.reload();
      //   });

      //   function generatePrimes(quota) {
      //     function isPrime(n) {
      //       for (let c = 2; c <= Math.sqrt(n); ++c) {
      //         if (n % c === 0) {
      //           return false;
      //         }
      //       }
      //       return true;
      //     }

      //     const primes = [];
      //     const maximum = 1000000;

      //     while (primes.length < quota) {
      //       const candidate = Math.floor(Math.random() * (maximum + 1));
      //       if (isPrime(candidate)) {
      //         primes.push(candidate);
      //       }
      //     }

      //     return primes;
      //   }

      //   document.querySelector("#generate").addEventListener("click", () => {
      //     const quota = document.querySelector("#quota").value;
      //     const primes = generatePrimes(quota);
      //     document.querySelector(
      //       "#output"
      //     ).textContent = `Finished generating ${quota} primes!`;
      //   });

      //   document.querySelector("#reload").addEventListener("click", () => {
      //     document.location.reload();
      //   });
    </script>
  </body>
</html>
